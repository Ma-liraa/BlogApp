@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* تم جدید: بر پایه Blue-600 و Slate */

    /* Primary (Blue) - رنگ اصلی برند */
    --color-primary-900: 30, 58, 138; /* blue-900 */
    --color-primary-800: 37, 99, 235; /* blue-600 (Main Action) */
    --color-primary-700: 29, 78, 216; /* blue-700 (Hover) */
    --color-primary-200: 191, 219, 254; /* blue-200 */
    --color-primary-100: 239, 246, 255; /* blue-50 (Backgrounds) */

    /* Text & Neutral (Slate) - رنگ‌های متن و خنثی */
    --color-text: 15, 23, 42; /* slate-900 */
    --color-paragraph: 51, 65, 85; /* slate-700 */
    --color-icon: 71, 85, 105; /* slate-500 */
    --color-border: 226, 232, 240; /* slate-200 */

    /* Success (Emerald) */
    --color-success-500: 16, 185, 129;
    --color-success-100: 209, 250, 229;

    /* Warning (Amber) */
    --color-warning-500: 245, 158, 11;
    --color-warning-100: 254, 243, 199;

    /* Error (Rose) */
    --color-error-500: 244, 63, 94; /* rose-500 */
    --color-error-100: 255, 228, 230; /* rose-100 */
  }
}

* {
  box-sizing: border-box;
  scroll-behavior: smooth;
  outline: none;
  padding: 0;
  margin: 0;
}

html,
body {
  padding: 0;
  margin: 0;
  font-family:
    var(--font-iranYekan),
    ui-sans-serif,
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    "Helvetica Neue",
    Arial,
    sans-serif;
  min-height: 100vh;
  user-select: text;
  /* پس‌زمینه کلی سایت مشابه صفحات قبلی */
  background-color: #f8fafc; /* slate-50 */
  color: rgb(var(--color-text));
}

@layer components {
  /* --- استایل فرم‌ها --- */
  .form {
    @apply flex w-full max-w-lg flex-col gap-y-6 rounded-3xl bg-white p-6 shadow-xl shadow-slate-200/50 ring-1 ring-slate-100 md:p-8;
  }

  /* --- استایل اینپوت‌ها --- */
  .textField__input {
    @apply w-full rounded-xl border border-slate-200 bg-white p-4 text-slate-700 placeholder-slate-400 transition-all duration-300 ease-out hover:border-blue-400 focus:border-blue-600 focus:bg-white focus:ring-4 focus:ring-blue-500/10;
  }

  /* --- استایل دکمه‌ها --- */
  .btn {
    @apply flex items-center justify-center gap-2 rounded-xl px-6 py-3 text-sm font-bold transition-all duration-300 active:scale-95;
  }

  /* دکمه اصلی (آبی) */
  .btn--primary {
    @apply bg-blue-600 text-white shadow-md shadow-blue-500/20 hover:-translate-y-0.5 hover:bg-blue-700 hover:shadow-lg;
  }

  /* دکمه ثانویه (کمرنگ) */
  .btn--secondary {
    @apply bg-blue-50 text-blue-600 hover:bg-blue-100;
  }

  /* دکمه دورخط (Outline) */
  .btn--outline {
    @apply border border-slate-200 bg-white text-slate-600 hover:bg-slate-50 hover:text-slate-900;
  }

  /* دکمه خطر (قرمز) */
  .btn--danger {
    @apply border border-rose-100 bg-rose-50 text-rose-600 hover:bg-rose-600 hover:text-white;
  }

  /* --- استایل بج‌ها (Badges) --- */
  .badge {
    @apply inline-flex items-center rounded-lg px-2.5 py-0.5 text-xs font-medium ring-1 ring-inset;
  }
  .badge--primary {
    @apply bg-blue-50 text-blue-700 ring-blue-700/10;
  }
  .badge--secondary {
    @apply bg-slate-50 text-slate-600 ring-slate-500/10;
  }
  .badge--success {
    @apply bg-emerald-50 text-emerald-700 ring-emerald-600/20;
  }
  .badge--danger {
    @apply bg-rose-50 text-rose-700 ring-rose-600/10;
  }
  .badge--warning {
    @apply bg-amber-50 text-amber-700 ring-amber-600/20;
  }

  /* --- استایل لودرها --- */
  .spinner {
    margin: 3.2rem auto 1.6rem;
    width: 60px;
    aspect-ratio: 1;
    border-radius: 50%;
    border: 8px solid rgb(var(--color-primary-100)); /* آبی خیلی روشن */
    border-right-color: rgb(var(--color-primary-800)); /* آبی اصلی */
    animation: rotate 1s infinite cubic-bezier(0.68, -0.55, 0.27, 1.55); /* انیمیشن نرم‌تر */
  }

  .spinner-mini {
    margin: 0;
    width: 20px;
    aspect-ratio: 1;
    border-radius: 50%;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-right-color: white;
    animation: rotate 1s infinite linear;
  }

  @keyframes rotate {
    to {
      transform: rotate(1turn);
    }
  }
}

/* --- استایل تگ‌ها (React Tag Input) --- */
.rti--container {
  background-color: #ffffff !important;
  --rti-radius: 0.75rem !important; /* rounded-xl */
  --rti-s: 0.5rem;
  --rti-tag: rgb(var(--color-primary-100));
  --rti-tag-remove: rgb(var(--color-error-500));
  border: 1px solid rgb(var(--color-border)) !important;
  transition: all 0.3s ease;
}

.rti--container:focus-within {
  border-color: rgb(var(--color-primary-800)) !important;
  box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1); /* ring effect */
}

.rti--container .rti--input {
  background-color: transparent !important;
  color: rgb(var(--color-text));
  padding: 0.5rem;
}

.rti--tag {
  background-color: rgb(var(--color-primary-100)) !important;
  color: rgb(var(--color-primary-800)) !important;
  padding: 0.25rem 0.75rem !important;
  border-radius: 0.5rem !important;
  font-weight: 500;
}

/* --- دکمه‌های عمومی --- */
button {
  cursor: pointer;
  outline: none;
}
button:disabled {
  cursor: not-allowed;
  opacity: 0.6;
  filter: grayscale(100%);
  pointer-events: none;
  box-shadow: none;
}

/* --- Input Number Styles --- */
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type="number"] {
  -moz-appearance: textfield;
}

/* --- جدول‌ها (Tables) --- */
table {
  border-collapse: separate; /* برای گرد کردن گوشه‌ها */
  border-spacing: 0;
  width: 100%;
  border-radius: 1rem;
  overflow: hidden;
  border: 1px solid rgb(var(--color-border));
}

table th {
  background-color: rgb(var(--color-primary-100));
  color: rgb(var(--color-paragraph));
  font-weight: 800;
  padding: 1rem 1.5rem;
  font-size: 0.9rem;
  text-align: right;
  white-space: nowrap;
}

table td {
  background-color: white;
  border-top: 1px solid rgb(var(--color-border));
  padding: 1rem 1.5rem;
  color: rgb(var(--color-text));
  font-size: 0.875rem;
  text-align: right;
  white-space: nowrap;
  transition: background-color 0.2s;
}

table tr:hover td {
  background-color: #f8fafc; /* slate-50 on hover */
}

a {
  display: block;
  text-decoration: none;
}

/* --- کامنت‌ها (Threaded Comments) --- */
.post-comments .post-comments__answer {
  position: relative;
  margin-right: 1.5rem; /* فاصله بیشتر برای ایندنت */
}

/* خط عمودی اصلی */
.post-comments .post-comments__answer::before {
  content: "";
  display: block;
  height: 100%;
  position: absolute;
  right: -20px;
  top: -15px;
  width: 2px;
  background-color: rgb(var(--color-border)); /* Slate-200 */
}

/* خط اتصال افقی */
.post-comments .post-comments__answer .answer-item::before {
  content: "";
  display: block;
  height: 2px;
  position: relative;
  right: -38px; /* تنظیم دقیق */
  top: 45px; /* تنظیم بر اساس ارتفاع آواتار */
  width: 18px;
  background-color: rgb(var(--color-border));
  z-index: 10;
}

/* مخفی کردن ادامه خط برای آیتم آخر */
.post-comments .post-comments__answer .last-item:after {
  content: "";
  display: block;
  height: calc(100% - 60px);
  position: absolute;
  right: -20px;
  top: 60px; /* شروع از پایین اتصال */
  width: 4px; /* ضخامت بیشتر برای پوشاندن */
  background-color: #f8fafc; /* رنگ پس‌زمینه سایت */
}

@media (max-width: 640px) {
  .post-comments .post-comments__answer::before {
    display: none;
  }
  .post-comments .post-comments__answer .answer-item::before {
    width: 2px;
    height: 14px;
    right: 12px;
    top: -15px;
    position: absolute;
  }
}
